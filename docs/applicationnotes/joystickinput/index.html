<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.78.1"><meta name=description content><link rel=apple-touch-icon sizes=180x180 href=/docs/images/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/docs/images/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/docs/images/favicon/favicon-16x16.png><link rel=manifest href=/docs/images/favicon/site.webmanifest><link rel=mask-icon href=/docs/images/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=/docs/images/favicon/favicon.ico><meta name=msapplication-TileColor content="#8c1515"><meta name=msapplication-config content="/docs/images/favicon/browserconfig.xml"><meta name=theme-color content="#8c1515"><title>Notes on Joystick Implementation :: The SPDL Docs Repository</title><link href=/docs/css/nucleus.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/fontawesome-all.min.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/hybrid.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/featherlight.min.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/perfect-scrollbar.min.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/auto-complete.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/atom-one-dark-reasonable.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/theme.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/hugo-theme.css?1604889669 rel=stylesheet media="screen, print"><link href=/docs/css/theme-stanford.css?1604889669 rel=stylesheet media="screen, print"><script src=/docs/js/jquery-3.3.1.min.js?1604889669></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><link rel=stylesheet href=/docs/bigfoot.css><link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,500|Oswald:500&display=swap" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=UA-71199601-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-71199601-2');</script></head><body data-url=/docs/applicationnotes/joystickinput/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=http://spdldaemon.github.io/docs><svg style="width:100%;height:100%" viewBox="0 0 109 109" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><g transform="translate(-41.3 -52.8)" display="none"><g fill="none" stroke="#4d4f53" stroke-width="2"><path d="m46.4 101 4.08 4.08"/><path d="m49.4 98.4 4.08 4.08"/><path d="m52.5 95.3 4.08 4.08"/><path d="m55.6 92.2 4.08 4.08"/><path d="m58.7 89.1 4.08 4.08"/><path d="m61.7 86.1 4.08 4.08"/><path d="m64.8 83 4.08 4.08"/><path d="m67.9 79.9 4.08 4.08"/><path d="m71 76.8 4.08 4.08"/><path d="m74.1 73.8 4.08 4.08"/><path d="m77.1 70.7 4.08 4.08"/><path d="m80.2 67.6 4.08 4.08"/><path d="m83.3 64.5 4.08 4.08"/><path d="m86.4 61.5 4.08 4.08"/><path d="m89.4 58.4 4.08 4.08"/><path d="m92.5 55.3 4.08 4.08"/></g><g><rect transform="rotate(-45)" x="-44.1" y="100" width="4.16" height="14.7" ry="2.08" fill="#0000c8"/><rect transform="rotate(-45)" x="27.3" y="100" width="4.16" height="14.7" ry="2.08" fill="#0000c8"/><rect transform="rotate(-45)" x="-44.1" y="112" width="4.16" height="14.7" ry="2.08" display="inline" fill="#c8c800"/><rect transform="rotate(225)" x="-114" y="-47.4" width="4.16" height="14.7" ry="2.08" display="inline" fill="#c8c800"/></g><g fill="#c80000"><rect transform="rotate(-45)" x="-44.1" y="164" width="8.7" height="14.7" ry="2.08" display="inline"/><rect transform="rotate(-45)" x="22.8" y="123" width="8.7" height="14.7" ry="2.08" display="inline"/><rect transform="rotate(45)" x="110" y="-21.6" width="8.7" height="14.7" ry="2.08" display="inline"/><rect transform="rotate(45)" x="177" y="18.1" width="8.7" height="14.7" ry="2.08" display="inline"/></g></g><g transform="translate(-41.3 -52.8)" display="none"><rect x="30.9" y="53.1" width="134" height="110" fill="#dc1010" fill-opacity=".992"/></g><g transform="translate(-41.3 -52.8)" fill="none" stroke="#f4f4f4" stroke-opacity=".588" stroke-width="2"><g transform="rotate(-45.4 94.5 112)"><path d="m66.1 66.2v5.76"/><path d="m70.5 66.2v5.76"/><path d="m74.8 66.2v5.76"/><path d="m79.2 66.2v5.76"/><path d="m83.5 66.2v5.76"/><path d="m87.9 66.2v5.76"/><path d="m92.2 66.2v5.76"/><path d="m96.6 66.2v5.76"/><path d="m101 66.2v5.76"/><path d="m105 66.2v5.76"/><path d="m110 66.2v5.76"/><path d="m114 66.2v5.76"/><path d="m118 66.2v5.76"/><path d="m123 66.2v5.76"/><path d="m127 66.2v5.76"/><path d="m131 66.2v5.76"/></g><g transform="rotate(225 114 68.5)"><path d="m66.1 66.2v5.76"/><path d="m70.5 66.2v5.76"/><path d="m74.8 66.2v5.76"/><path d="m79.2 66.2v5.76"/><path d="m83.5 66.2v5.76"/><path d="m87.9 66.2v5.76"/><path d="m92.2 66.2v5.76"/><path d="m96.6 66.2v5.76"/><path d="m101 66.2v5.76"/><path d="m105 66.2v5.76"/><path d="m110 66.2v5.76"/><path d="m114 66.2v5.76"/><path d="m118 66.2v5.76"/><path d="m123 66.2v5.76"/><path d="m127 66.2v5.76"/><path d="m131 66.2v5.76"/></g><g transform="rotate(-45.4 192 71.3)"><path d="m66.1 66.2v5.76"/><path d="m70.5 66.2v5.76"/><path d="m74.8 66.2v5.76"/><path d="m79.2 66.2v5.76"/><path d="m83.5 66.2v5.76"/><path d="m87.9 66.2v5.76"/><path d="m92.2 66.2v5.76"/><path d="m96.6 66.2v5.76"/><path d="m101 66.2v5.76"/><path d="m105 66.2v5.76"/><path d="m110 66.2v5.76"/><path d="m114 66.2v5.76"/><path d="m118 66.2v5.76"/><path d="m123 66.2v5.76"/><path d="m127 66.2v5.76"/><path d="m131 66.2v5.76"/></g><g transform="rotate(44.6 1.09 64.4)"><path d="m66.1 66.2v5.76"/><path d="m70.5 66.2v5.76"/><path d="m74.8 66.2v5.76"/><path d="m79.2 66.2v5.76"/><path d="m83.5 66.2v5.76"/><path d="m87.9 66.2v5.76"/><path d="m92.2 66.2v5.76"/><path d="m96.6 66.2v5.76"/><path d="m101 66.2v5.76"/><path d="m105 66.2v5.76"/><path d="m110 66.2v5.76"/><path d="m114 66.2v5.76"/><path d="m118 66.2v5.76"/><path d="m123 66.2v5.76"/><path d="m127 66.2v5.76"/><path d="m131 66.2v5.76"/></g></g><g transform="translate(-41.3 -52.8)"><rect transform="rotate(-45.4)" x="-46.7" y="106" width="75.1" height="75.1" ry="3.86" fill="none" stroke="#f4f4f4" stroke-linejoin="round"/><circle transform="rotate(-45.4)" cx="-40.5" cy="112" r="2.27" fill="#f4f4f4"/></g><g transform="translate(-41.3 -52.8)" display="none" word-spacing="0"><text transform="rotate(-45.4)" x="-18.984667" y="126.87369" fill="#2d2e29" font-family="sans-serif" font-size="9.76" letter-spacing="0" stroke-width=".183" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-18.984667" y="126.87369" fill="#f4f4f4" font-size="11.3" stroke-width=".183"><tspan font-family="Raleway" font-weight="300">ME</tspan><tspan font-family="Orbitron" font-weight="bold">218</tspan></tspan></text><text transform="rotate(-45.4)" x="-38.931206" y="138.35268" fill="#f4f4f4" font-family="'League Mono'" font-size="11.3" font-weight="200" letter-spacing="2.05" stroke-width=".308" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1"><tspan x="-38.931206" y="138.35268"><tspan font-weight="bold">S</tspan><tspan fill="#f4f4f4" fill-opacity=".784">MART</tspan><tspan font-weight="bold">P</tspan><tspan fill="#f4f4f4" fill-opacity=".855">R</tspan></tspan><tspan x="-38.931206" y="149.78459"><tspan fill="#f4f4f4" fill-opacity=".855">ODUCT</tspan><tspan font-weight="bold">D</tspan><tspan fill="#f4f4f4" fill-opacity=".855">E</tspan></tspan><tspan x="-38.931206" y="161.21651"><tspan fill="#f4f4f4" fill-opacity=".855">SIGN</tspan><tspan font-weight="bold">L</tspan><tspan fill="#f4f4f4" fill-opacity=".855">AB</tspan></tspan><tspan x="-38.931206" y="172.64842" fill-opacity=".855">ORATORY</tspan></text></g><g transform="translate(1.32e-6)" fill="#f4f4f4"><g><path d="m41.6 43.9-4.94-4.87 1.63 6.05-.254.257-6.07-1.55 4.94 4.87-.404.41-5.71-5.63.404-.41 6.43 1.65-1.74-6.41.404-.41 5.71 5.63z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m46.8 37.9.37.365-3.75 3.8-5.71-5.63 3.68-3.73.37.365-3.27 3.32 2.24 2.21 2.86-2.9.354.349-2.86 2.9 2.37 2.34z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m46.8 27.1q.222-.225.509-.339.295-.122.59-.116.295-.01.591.108.288.11.513.332l1.29 1.27q.233.23.347.516.114.287.116.59.002.287-.116.584-.11.288-.332.513l-3.46 3.51q-.0555.0563-.0073.104l1.13 1.11q.0562.0555.112-795e-6l4.56-4.62 1.05 1.04-5.65 5.73-2.23-2.2q-.225-.222-.339-.509-.122-.295-.124-.582-.0021-.303.108-.591.11-.288.34-.521l3.46-3.51q.0555-.0563.0073-.104l-1.29-1.27q-.0562-.0555-.112 795e-6l-3.46 3.51q-.0555.0563 765e-6.112l.434.428-1.04 1.05-.434-.428q-.225-.222-.339-.509-.122-.295-.124-.582-.0021-.303.108-.591.11-.288.34-.521z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m50.1 23.7 1.15-1.17 5.79 5.71-1.04 1.05-4.25-4.19q.0258.263.0435.519.0176.239.0433.487l-1.37 1.39z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m59.8 18.4q.153.151.266.341.113.175.154.39.216.0384.4.157.184.102.337.253l1.28 1.26q.233.23.347.516.114.287.116.59.002.287-.116.584-.11.288-.332.513l-3.46 3.51q-.23.233-.516.347-.287.114-.582.124-.295-.0059-.584-.116-.288-.11-.521-.34l-1.28-1.26q-.322-.317-.42-.731-.416-.0929-.737-.41l-1.13-1.12q-.225-.222-.339-.509-.122-.295-.124-.582-.0021-.303.108-.591.11-.288.34-.521l3.46-3.51q.198-.201.453-.314.255-.13.526-.147.271-.0338.535.0362.272.062.496.22zm.119 2.19q-.0482-.0475-.104.0087l-3.46 3.51q-.0555.0563-.0073.104l1.28 1.26q.0562.0555.112-794e-6l3.46-3.51q.0555-.0563-766e-6-.112zm-2.28-2.25q-.0562-.0555-.112 795e-6l-3.46 3.51q-.0555.0563 766e-6.112l1.21 1.19q.0562.0555.112-794e-6l3.46-3.51q.0555-.0563-766e-6-.112z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m29.1 66.1q.692-.348 1.26-.536.557-.195 1.2-.136.647.0514 1.19.59.884.872.684 1.86-.201.991-1.14 1.95-1.59 1.61-3.28 1.03l.516-1.57q.456.164.918.0654.462-.099.859-.501.388-.394.473-.802.0769-.416-.253-.741-.289-.285-.712-.211-.423.0748-1.06.383-.613.3-1.16.487-.542.179-1.21.12-.671-.0592-1.23-.614-.764-.753-.539-1.69.225-.936 1.09-1.81.666-.675 1.48-.904.805-.237 1.56.0929l-.437 1.49q-.456-.18-.871-.0977-.423.0748-.74.396-.349.354-.426.689-.0775.336.172.582.225.222.6.227.367-.0026.797-.213z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/></g><g fill-opacity=".784"><path d="m40 61.9-4.92-4.41 3.25 5.38-.444.45-5.43-3.18 4.48 4.86-.412.418-5.3-5.88.499-.506 4.19 2.52 1.73 1.09-1.12-1.71-2.57-4.16.499-.506 5.95 5.22z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m43.8 54.3-2.05 2.07 1.45 2.26-.42.426-4.38-6.81 1.22-1.24 6.87 4.29-.42.426zm-.465-.284-3.66-2.3-.555.563 2.35 3.63z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m48.5 45.1q1.41 1.39.497 2.65l3.57 1.43-.452.458-3.51-1.44-1.31 1.33 2.5 2.47-.404.41-5.63-5.55 1.7-1.72q.42-.426.85-.653.429-.227.989-.119.56.108 1.2.742zm-1.58 4.05 1.53-1.55q.42-.426.369-.921-.0515-.511-.719-1.17-.627-.618-1.13-.623-.503-.0204-.931.414l-1.49 1.51z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m53.6 37.6-1.62 1.64 5.25 5.18-.404.41-5.25-5.18-1.61 1.63-.378-.373 3.63-3.68z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/></g><path d="m61 36.8 1.85 1.82-1.21 1.23-5.63-5.55 1.83-1.86q.468-.474.961-.749.493-.291 1.17-.192.679.0831 1.46.852 1.22 1.2 1.08 2.14-.153.927-.89 1.67zm-.981-.967.404-.41q.285-.289.388-.522t-.0116-.519q-.114-.303-.516-.699-.37-.365-.65-.45-.28-.102-.511.0036-.231.105-.516.395l-.404.41z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><g fill-opacity=".784"><path d="m67.1 26.2q1.41 1.39.497 2.65l3.57 1.43-.452.458-3.51-1.44-1.31 1.33 2.5 2.47-.404.41-5.63-5.55 1.7-1.72q.42-.426.85-.653.429-.227.989-.119t1.2.742zm-1.58 4.05 1.53-1.55q.42-.426.369-.921-.0515-.511-.719-1.17-.627-.618-1.13-.623-.503-.0204-.931.414l-1.49 1.51z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m40.5 77.8q-.864.876-1.98.772-1.12-.12-2.76-1.74-1.63-1.61-1.76-2.72-.128-1.12.736-2 .856-.868 1.97-.748 1.12.104 2.75 1.71 1.64 1.62 1.77 2.74.127 1.11-.729 1.98zm-.386-.38q.436-.442.528-.954.1-.52-.272-1.24-.372-.732-1.35-1.7-.981-.967-1.71-1.32-.721-.362-1.24-.255-.51.0994-.946.541-.436.442-.536.962-.1.52.264 1.24.372.716 1.35 1.68.981.967 1.71 1.34.729.354 1.25.247.518-.107.954-.549z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m40.9 66q.571-.579 1.12-.846.541-.275 1.47.0217.936.289 2.23 1.56 1.29 1.28 1.6 2.21.31.924.0502 1.48-.268.545-.838 1.12l-1.26 1.28-5.63-5.55zm5.41 5.02q.491-.498.584-1.03.0921-.527-.288-1.2-.38-.692-1.31-1.61-.932-.919-1.62-1.28-.689-.378-1.22-.279-.526.0995-1.02.598l-1.01 1.03 4.87 4.8z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m52.9 65.2q-.571.579-1.15.75-.582.156-1.29-.151-.705-.314-1.6-1.2l-3.36-3.31.404-.41 3.44 3.39q.723.713 1.28.981.553.26.999.145.454-.123.898-.573.452-.458.56-.906.109-.448-.167-.989-.275-.557-.999-1.27l-3.44-3.39.404-.41 3.36 3.31q.9.888 1.22 1.59t.177 1.28q-.156.576-.734 1.16z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m60 56.3q.204.629.0089 1.28-.203.64-.79 1.23-.919.932-2.07.733-1.15-.215-2.66-1.71-1.5-1.48-1.72-2.63-.216-1.16.712-2.1 1.13-1.14 2.53-.728l-.18.584q-.56-.188-1.04-.0566-.47.123-.922.581-.713.723-.483 1.68t1.53 2.24q1.31 1.29 2.26 1.52.951.225 1.66-.491.919-.932.577-1.95z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m61.8 45.6-1.62 1.64 5.25 5.18-.404.41-5.25-5.18-1.61 1.63-.378-.373 3.63-3.68z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/></g><path d="m65.8 40.7q.61-.619 1.2-.926.596-.315 1.56-.0508.96.249 2.25 1.52 1.29 1.28 1.56 2.24.27.948-.0371 1.55-.299.593-.91 1.21l-1.72 1.74-5.63-5.55zm4.51 4.72q.452-.458.521-.85.0611-.4-.23-.861-.299-.469-1.04-1.2-.739-.729-1.2-1.01-.473-.292-.864-.217-.399.0666-.85.525l-.373.378 3.67 3.61z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><g fill-opacity=".784"><path d="m71.3 35.9 2.3 2.27 2.23-2.26.37.365-2.23 2.26 2.2 2.17 2.66-2.69.378.373-3.06 3.1-5.63-5.55 3.06-3.1.378.373z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m45.3 82.7q1.34-.608 2.21-.702.861-.102 1.46.493.715.705.602 1.61-.114.887-.954 1.74-1.39 1.41-2.83.994l.203-.624q.576.188 1.13.0081.549-.187 1.11-.758.674-.683.757-1.33.0832-.663-.439-1.18-.434-.428-1.1-.359-.678.0606-1.71.547-.971.47-1.8.508-.83.0218-1.41-.549-.643-.634-.513-1.43.138-.799.875-1.55 1.21-1.23 2.58-.768l-.187.592q-.544-.204-1.03-.0647-.486.123-.978.621-.539.547-.663 1.12-.116.568.334 1.01.78.769 2.35.0634z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m49.7 74.1 4.87 4.8 1.3-1.32.378.373-3 3.04-.378-.373 1.29-1.31-4.87-4.8-1.29 1.31-.378-.373 3-3.04.378.373z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m62 70.6q.108.566-.0871 1.25-.195.68-.853 1.35-.919.932-2.07.733-1.14-.208-2.66-1.71-1.5-1.48-1.69-2.66-.184-1.2.751-2.14.555-.563 1.14-.71.59-.148 1.3.0628l-.18.584q-.576-.188-1.01-.0888-.438.0909-.874.533-1.51 1.54.978 3.99 1.31 1.29 2.26 1.52.952.225 1.66-.491.935-.948.753-1.97l-1.76-1.74-1.24 1.26-.378-.373 1.65-1.67z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m63.1 59.8 5.63 5.55-.539.547-7.21-2.69 5 4.93-.404.41-5.63-5.55.539-.547 7.21 2.69-5-4.93z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/></g><path d="m74.4 57.5.981.967-3.52 3.57-5.63-5.55 1.21-1.23 4.65 4.58z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><g fill-opacity=".784"><path d="m78.7 51.5-2.05 2.07 1.45 2.26-.42.426-4.38-6.81 1.22-1.24 6.87 4.29-.42.426zm-.465-.284-3.66-2.3-.555.563 2.35 3.63z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m83.7 44.2q-.0322-.0317.326-.138.366-.114.862-.006.488.1 1.02.624.812.801.881 1.53.061.726-.645 1.44l-1.89 1.92-5.63-5.55 1.55-1.57q.428-.434.818-.652.382-.226.893-.134.503.0843 1.11.679.482.476.645.89t.133.702q-.0299.288-.0621.256zm-2.13 1.92 1.43-1.45q.357-.362.242-.84t-.662-1.02q-.587-.579-1.03-.568-.431.003-.827.405l-1.32 1.33zm4.18 1.18q.515-.522.456-1.04-.0595-.518-.711-1.16-.547-.539-1.08-.559-.527-.0282-.892.341l-1.59 1.61 2.34 2.31z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m56.8 93.9q-.864.876-1.98.772-1.12-.12-2.76-1.74-1.63-1.61-1.76-2.72-.128-1.12.736-2 .856-.868 1.97-.748 1.12.104 2.75 1.71 1.64 1.62 1.77 2.74.127 1.11-.729 1.98zm-.386-.38q.436-.442.528-.954.1-.52-.272-1.24-.372-.732-1.35-1.7t-1.71-1.32q-.721-.362-1.24-.255-.51.0994-.946.541-.436.442-.536.962-.1.52.264 1.24.372.716 1.35 1.68t1.71 1.34q.729.354 1.25.247.518-.107.954-.549z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m60.5 81.7q1.41 1.39.497 2.65l3.57 1.43-.452.458-3.51-1.44-1.31 1.33 2.5 2.47-.404.41-5.63-5.55 1.7-1.72q.42-.426.85-.653.429-.227.989-.119.56.108 1.2.742zm-1.58 4.05 1.53-1.55q.42-.426.369-.921-.0515-.511-.719-1.17-.627-.618-1.13-.623-.503-.0204-.931.414l-1.49 1.51z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m68.2 78.3-2.05 2.07 1.45 2.26-.42.426-4.38-6.81 1.22-1.24 6.87 4.29-.42.426zm-.465-.284-3.66-2.3-.555.563 2.35 3.63z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m71.8 67.9-1.62 1.64 5.25 5.18-.404.41-5.25-5.18-1.61 1.63-.378-.373 3.63-3.68z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m81.5 68.8q-.864.876-1.98.772-1.12-.12-2.76-1.74-1.63-1.61-1.76-2.72-.128-1.12.736-2 .856-.868 1.97-.748 1.12.104 2.75 1.71 1.64 1.62 1.77 2.74.127 1.11-.729 1.98zm-.386-.38q.436-.442.528-.954.1-.52-.272-1.24-.372-.732-1.35-1.7-.981-.967-1.71-1.32-.721-.362-1.24-.255-.51.0994-.946.541-.436.442-.536.962-.1.52.264 1.24.372.716 1.35 1.68.981.967 1.71 1.34.729.354 1.25.247.518-.107.954-.549z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m85.3 56.6q1.41 1.39.497 2.65l3.57 1.43-.452.458-3.51-1.44-1.31 1.33 2.5 2.47-.404.41-5.63-5.55 1.7-1.72q.42-.426.85-.653.429-.227.989-.119t1.2.742zm-1.58 4.05 1.53-1.55q.42-.426.369-.921-.0515-.511-.719-1.17-.627-.618-1.13-.623-.503-.0204-.931.414l-1.49 1.51z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/><path d="m90.1 48.7 1.7 4.97 2.28 2.25-.404.41-2.27-2.24-5.01-1.63.452-.458 4.2 1.35.0238-.0241-1.42-4.17z" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal"/></g></g></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/docs/js/lunr.min.js?1604889669></script><script type=text/javascript src=/docs/js/auto-complete.js?1604889669></script><script type=text/javascript>var baseurl="http:\/\/spdldaemon.github.io\/docs";</script><script type=text/javascript src=/docs/js/search.js?1604889669></script></div><div class=highlightable><ul class=topics><li data-nav-id=/docs/tools/ title=Tools class=dd-item><a href=/docs/tools/><b>1. </b>Tools</a><ul><li data-nav-id=/docs/tools/onshape/ title=Onshape class=dd-item><a href=/docs/tools/onshape/>Onshape</a></li><li data-nav-id=/docs/tools/kicad/ title=KiCad class=dd-item><a href=/docs/tools/kicad/>KiCad</a><ul><li data-nav-id=/docs/tools/kicad/usingkicad/ title="Using KiCad" class=dd-item><a href=/docs/tools/kicad/usingkicad/>Using KiCad</a></li><li data-nav-id=/docs/tools/kicad/schematiccapture/ title="Schematic Capture" class=dd-item><a href=/docs/tools/kicad/schematiccapture/>Schematic Capture</a></li></ul></li></ul></li><li data-nav-id=/docs/applicationnotes/ title="Application Notes" class="dd-item
parent"><a href=/docs/applicationnotes/><b>2. </b>Application Notes</a><ul><li data-nav-id=/docs/applicationnotes/magneticfieldsensing/ title="Magnetic Field Sensing" class=dd-item><a href=/docs/applicationnotes/magneticfieldsensing/>Magnetic Field Sensing</a></li><li data-nav-id=/docs/applicationnotes/audiomodems/ title="Audio Modems and the PIC" class=dd-item><a href=/docs/applicationnotes/audiomodems/>Audio Modems and the PIC</a></li><li data-nav-id=/docs/applicationnotes/joystickinput/ title="Notes on Joystick Implementation" class="dd-item
parent
active"><a href=/docs/applicationnotes/joystickinput/>Notes on Joystick Implementation</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://me218archive.stanford.edu><i class="fas fa-archive"></i>The ME 218 Archive</a></li><li><a class=padding href=https://github.com/SPDLDaemon/spdl-docs-master><i class="fab fa-github"></i>Github Repository</a></li><li><a class=padding href=https://gohugo.io/><i class="fas fa-bookmark"></i>Hugo Documentation</a></li><li><a class=padding href=https://learn.netlify.com/en/><i class="fas fa-bookmark"></i>Learn Theme Documentation</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/docs/>The SPDL Docs Repository</a> <i class="fa fa-caret-right crumb" aria-hidden=true></i><a href=/docs/applicationnotes/>Application Notes</a> <i class="fa fa-caret-right crumb" aria-hidden=true></i>Notes on Joystick Implementation</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#understanding-joystick-output>Understanding Joystick Output</a></li><li><a href=#control-mappings>Control Mappings</a><ul><li><a href=#getting-a-control-value>Getting a Control Value</a></li><li><a href=#position-mapping>Position Mapping</a></li><li><a href=#velocity-mapping>Velocity Mapping</a></li></ul></li><li><a href=#usability>Usability</a><ul><li><a href=#deadband>Deadband</a></li><li><a href=#scaled-deadband>Scaled Deadband</a></li><li><a href=#cubic-scaling>Cubic Scaling</a></li><li><a href=#scaled-cubic-deadband>Scaled Cubic Deadband</a></li></ul></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Notes on Joystick Implementation</h1><h3 id=understanding-joystick-output>Understanding Joystick Output</h3><p>The output from the joystick is fully analog, using potentiometers to covert the joystick motion into a voltage you can measure.
The figure below shows the internal circuity of the joystick.</p><p><img src=joystick_equiv_circuit.png alt="Equivalent joystick circuit"></p><p>You can then apply the resistor divider equation to get the voltages <code>VRx</code> and <code>VRy</code>:</p><p>$$ V_i = V_\mathrm{CC} \frac{V_\mathrm{sweep}}{V_\mathrm{total}}$$</p><p>Notice that this equation is fully linear with respect to the rotation of the joystick.</p><p>A digital system cannot directly read an analog voltage, so \(V_i\) is measured with an analog-to-digital converter (ADC).
Since this returns a binary number<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> that represents the voltage input to the ADC, we use the idea of &ldquo;counts&rdquo; to represent the measured value.</p><div class="notices info"><p>ADCs are typically characterized by how many &ldquo;bits&rdquo; they have. You might hear of, for example, an 8-bit ADC, or a 10-bit ADC, or a 16-bit ADC. This number refers to the size of the binary number the ADC passes to the processor: an 8-bit ADC would output, say, <code>0b00101100</code> or <code>0b11101011</code>—and is capable of all values from \(0\) to \(2^N-1\). An 8-bit ADC can therefore output 256 unique values, while a 16-bit ADC can output 65536.</p><p>These numbers are evenly distributed between two reference points against which the ADC is measuring the signal. Typically, these are ground and the supply rail, but may vary in general.</p></div><p>For a 10-bit ADC, like we have on the PIC, we have that <i class=units>0&#8201;V</i> is <code>0x00</code>, and \(V_\mathrm{CC}\) is <code>0x3FF</code><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</p><p>This numeric value then has to be converted to a &ldquo;control&rdquo; by your code.
Thinking in counts can make your life easier here.</p><h3 id=control-mappings>Control Mappings</h3><p>Let&rsquo;s now walk through the process of taking the raw ADC measurement and getting a useful control signal out of it.</p><h4 id=getting-a-control-value>Getting a Control Value</h4><p>We start be defining a few terms.
We let the &ldquo;player&rdquo; be the thing controlled by the joystick, and we define the player state as the vector \(\mathbf{s}\) and the control as \(\mathbf{u}\).
We will also define the raw output of the joystick as \(\mathbf{j}\).
That is,</p><p>$$ \mathbf{s} = \begin{bmatrix} x \\ y \end{bmatrix}, \mathbf{j} = \begin{bmatrix} C_x \\ C_y \end{bmatrix}, $$</p><p>where \(C_i\) are the measured values from the ADC in counts, and \(x\) and \(y\) are the coordinates of the player.</p><p>In order to get \(\mathbf{u}\) we can perform a linear transformation on \(\mathbf{j}\) by multiplication with a scaling matrix \(\mathbf{M}\) and adding an offset vector \(\mathbf{b}\):</p><p>$$ \mathbf{u} = \mathbf{M}\mathbf{j} + \mathbf{b} $$</p><p>$$ \mathbf{M} = \begin{bmatrix} m_x & 0 \\ 0 & m_y \end{bmatrix}, \mathbf{b} = \begin{bmatrix} b_x \\ b_y \end{bmatrix} $$</p><p>This will transform our joystick output to a control through a linear mapping<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.
Other mappings are possible<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>, but linear is the simplest to implement.
All the above equations can be reduced if only 1 axis of the joystick is used.
Note that \(\mathbf{M}\) is a diagonal matrix—this ensures that we&rsquo;re only scaling each joystick axis independently, and not coupling the axes to each other or rotating them.</p><p>Spend time on this!
Converting your joystick output to a control can make or break your gameplay.
Tune your controls carefully to get the desired feel when playing.
Play around with \(\mathbf{M}\) and \(\mathbf{b}\) to see what works well and what doesn’t—typically, you&rsquo;ll find it most useful to re-center the input around 0 as part of the processing, as it makes the remaining math much simpler.
If you feel compelled to use a different transformation technique, go for it!
Also consider stability; you don’t want your player bouncing all over the place either.</p><p>Now that we have a control mapping technique, what control options do we have? There are two main types, position and velocity mapping.</p><h4 id=position-mapping>Position Mapping</h4><p>Position mapping is quite intuitive<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>.
Wherever the joystick goes, the player goes.
In mathematical terms:</p><p>$$ \mathbf{s}_t = \mathbf{u}_t + \mathbf{s}_0 $$</p><p>where \(\mathbf{s}_t\) and \(\mathbf{u}_t\) represent the state and control vectors at time \(t\), and \(\mathbf{s}_0\) the initial state.
Essentially, this means that the player will be positioned on the screen wherever the joystick is.
If the joystick is moved to the extreme left, the player goes to the extreme left.
When the joystick snaps back to center, the player snaps back to center as well.
This type of control is not seen often.</p><h4 id=velocity-mapping>Velocity Mapping</h4><p>The more popular control scheme is where the joystick controls the velocity of the player rather than position.
Essentially, the user creates a velocity vector by moving the joystick, and this velocity is then applied to the player, causing the player to move around.
In mathematical terms:</p><p>$$ \mathbf{s}_t = \mathbf{s}_0 + \int_0^t \mathbf{u}_τ \,\mathrm{d}τ $$</p><p>Of course, performing an integral is not possible in a discrete environment, thus we have to use a summation technique.
Furthermore, we want to use an iterative approach since we cannot get an absolute control as a function of time, thus we convert the integral expression to the following:</p><p>$$ \mathbf{s}_t = \mathbf{s}_{t-1} + \mathbf{u}_t \Delta t $$</p><p>This is an Euler integration approach that is the simplest to implement.
There are other techniques, such as trapezoidal integration or Simpson&rsquo;s Rule, that you can also experiment with.
Here we only need to know the previous state.
Then, using the control and time between the current and last measurement, we can calculate what the state should be at the current time.</p><p>The keen reader will note that we have not specified any stability criterion, as Euler really only works for the correct \(\Delta t\).
While this is true when trying to converge to a solution, in our usage, we do not worry about convergence since we are not trying to reach a specific solution.
Since the user will be playing the game, they will correct for their motions inherently.
The only caveat is to ensure \(\Delta t\) is small enough to make the motion appear smooth to the user.</p><h3 id=usability>Usability</h3><p>If you&rsquo;ve tried experimenting with the \(\mathbf{M}\) and \(\mathbf{b}\) matrices, and you still can&rsquo;t find a control mapping you&rsquo;re happy with, you may want to look at some more advanced mappings to help usability.
When you&rsquo;re trying to control things with a velocity-mapped controller, it&rsquo;s typically the case that</p><ol><li>When you&rsquo;re near zero, you want to remain still, even if your hand is jittering a little, or is busy moving the other joystick axis.</li><li>When you&rsquo;re near zero, you want more precise control over small velocities.</li></ol><p>These can be addressed by applying deadbands and cubic mappings.
Pretty much every analog input you use in your life—computer mice, some volume knobs, joysticks on your gaming console—will typically do one or more of these to make the inputs feel smoother and more intuitive.
Sometimes these will do even more complicated mappings, like adding acceleration based on the time you hold a particular velocity, or by modifying the mapping function based on the speed of the input.
These are outside the scope of this note, but simply to point out that when mapping controls, the sky&rsquo;s the limit<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>.</p><h4 id=deadband>Deadband</h4><p>The simplest way to damp out micromotions near zero (when the user wants to be still) is to simply ignore any value with small absolute value:</p><p>$$ d(x) = \begin{cases} 0 & |x| \lt \delta \\ x & |x| \geq \delta \end{cases} $$</p><p>where \(\delta\) is half the total width of the deadband.
This ends up looking like this:</p><p><img src=linDB.png alt="Simple linear deadband"></p><p>Notice that while small inputs near zero don&rsquo;t accidentally move the player, the user also can&rsquo;t make very small movements.
The output suddenly jumps from 0 to a value when leaving the deadband, so the user can never command values smaller than this.</p><h4 id=scaled-deadband>Scaled Deadband</h4><p>To fix this, we can scale the function outside the deadband so it smoothly goes to the same value at the ends from zero:</p><p>$$ g(x) = \begin{cases} 0 & |x| \lt \delta \\ \frac{f(x) - \text{sign}\,x \cdot f(\delta)}{\max_x f(x) - f(\delta)} & |x| \geq \delta \end{cases} $$</p><p>where again \(\delta\) is half of the total deadband width, \(x\) is the input, and \(f(x)\) is a continuous odd function.
Setting \(f(x)=x\) gives us a scaled linear deadband, like so:</p><p><img src=scaleLinDB.png alt="Scaled linear deadband"></p><p>Now when the deadband ends, the user can still apply arbitrarily small inputs if they choose to, so that&rsquo;s an improvement.</p><h4 id=cubic-scaling>Cubic Scaling</h4><p>However, this still sacrifices smoothness and precision near zero; using a cubic scaling can help with balancing range and precision.
We define \(c(x)\) as follows:</p><p>$$ c(x) = \omega x^3 + (1-\omega)x $$
where \(\omega \in [0,1]\) can be thought of as a blending factor, mixing linear and cubic responses; for \(\omega=0\), we have \(c(x)=x\) and get a straight mapping of input to output. As \(\omega\) is increased, the function approaches \(x^3\), reducing sensitivity near zero:</p><p><img src=cubic.png alt="Cubic mappings with scaling factor"></p><h4 id=scaled-cubic-deadband>Scaled Cubic Deadband</h4><p>But now we&rsquo;ve lost the deadband. However, it so happens that this particular function is, in fact, a continuous odd function, so we can just plug it back into \(g(x)\) in place of \(f(x)\), giving us a scaled cubic deadband:</p><p><img src=scaledCubicDB.png alt="Scaled cubic deadband mapping"></p><p>This gives you a lot more flexibility in how exactly you choose to map your inputs to your outputs.
This may not even be something you want in all cases, so don&rsquo;t feel like this is the only answer. The only right answer is the one that makes your game fun and enjoyable to play.</p><hr><p>Contributed by Riyaz Merchant and Arul Suresh, 6 Nov 2020.</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Since it&rsquo;s a pure number, it has no units, which is also partly why it makes more sense to think of it as &ldquo;counts&rdquo;. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>That&rsquo;s 1023 in decimal. Remember that \(2^{10}\) is 1024, but since 0 is a possible value, the 1024th number we can represent is 1023. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Yes, yes, technically adding \(\mathbf{b}\) makes it affine, we know. <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>And, in fact, are somewhat common in this type of input processing. More on this when we talk about usability. <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5 role=doc-endnote><p>At least, intuitive to write the code&mldr; <a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6 role=doc-endnote><p>Pun somewhat intended. Modern aircraft have many flight modes, where the control stick input is mapped in a way that incorporates the aircraft dynamics, so that moving the stick isn&rsquo;t interpreted as a command to move a control surface a certain amount, but as a command to have the entire aircraft move in a particular way. <a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/docs/applicationnotes/audiomodems/ title="Audio Modems and the PIC"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/docs/applicationnotes/magneticfieldsensing/ title="Magnetic Field Sensing" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/docs/js/clipboard.min.js?1604889669></script><script src=/docs/js/perfect-scrollbar.min.js?1604889669></script><script src=/docs/js/perfect-scrollbar.jquery.min.js?1604889669></script><script src=/docs/js/jquery.sticky.js?1604889669></script><script src=/docs/js/featherlight.min.js?1604889669></script><script src=/docs/js/highlight.pack.js?1604889669></script><script>hljs.initHighlightingOnLoad();</script><script src=/docs/js/modernizr.custom-3.6.0.js?1604889669></script><script src=/docs/js/learn.js?1604889669></script><script src=/docs/js/hugo-learn.js?1604889669></script><link href=/docs/mermaid/mermaid.css?1604889669 rel=stylesheet><script src=/docs/mermaid/mermaid.js?1604889669></script><script>mermaid.initialize({startOnLoad:true});</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body);></script><script type=text/javascript src=/docs/js/bigfoot.min.js></script><script type=text/javascript>$.bigfoot();</script></body></html>